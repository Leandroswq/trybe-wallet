(this["webpackJsonptrybe-wallet"]=this["webpackJsonptrybe-wallet"]||[]).push([[0],{31:function(e,t,n){e.exports=n(47)},36:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),l=n.n(c),i=(n(36),n(4)),u=n(20),o=n(2),s=n(10);function d(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],l=n[1],u=Object(a.useState)(""),o=Object(s.a)(u,2),d=o[0],m=o[1],p=Object(i.b)();return r.a.createElement("div",null,r.a.createElement("div",null,"Login"),r.a.createElement("label",{htmlFor:"login--email"},r.a.createElement("input",{"data-testid":"email-input",type:"email",id:"login--email",name:"email",value:c,onChange:function(e){var t=e.target.value;return l(t)}})),r.a.createElement("label",{htmlFor:"login--password"},r.a.createElement("input",{"data-testid":"password-input",type:"password",id:"login--password",name:"password",value:d,onChange:function(e){var t=e.target.value;return m(t)}})),r.a.createElement("button",{type:"button",disabled:!(/\D{1,}@\D{1,}\.com/.test(c)&&d.length>=6),onClick:function(){var t=e.history.push;p(function(e){return{type:"email",email:e}}(c)),t("/carteira")}},"Entrar"))}var m=n(9),p=n.n(m),E=n(12),b=function(e){return{type:"expenses",expense:e}},v=function(e){return{type:"updateExpense",expense:e}};function f(){var e=Object(i.c)((function(e){return e})),t=e.user.email,n=e.wallet.expenses.reduce((function(e,t){var n=t.value,a=t.currency;return e+=n*t.exchangeRates[a].ask}),0).toFixed(2);return r.a.createElement("header",null,"Header",r.a.createElement("p",{"data-testid":"email-field"},t),r.a.createElement("div",null,r.a.createElement("span",null,"Despesa Total R$"),r.a.createElement("span",{"data-testid":"total-field"},n),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL")))}var h=n(18),x=n(3);function y(){return j.apply(this,arguments)}function j(){return(j=Object(E.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://economia.awesomeapi.com.br/json/all",e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return O.apply(this,arguments)}function O(){return(O=Object(E.a)(p.a.mark((function e(){var t,n,a,r,c=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"USDT",e.next=3,y();case 3:return n=e.sent,a=Object.keys(n),r=a.filter((function(e){return e!==t})).reduce((function(e,t){return Object(x.a)(Object(x.a)({},e),{},Object(h.a)({},t,n[t]))}),{}),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){var e=Object(a.useState)(0),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)("USD"),u=Object(s.a)(l,2),o=u[0],d=u[1],m=Object(a.useState)("Dinheiro"),f=Object(s.a)(m,2),h=f[0],x=f[1],j=Object(a.useState)("Alimenta\xe7\xe3o"),g=Object(s.a)(j,2),O=g[0],w=g[1],k=Object(a.useState)(""),C=Object(s.a)(k,2),S=C[0],D=C[1],I=Object(a.useState)(null),F=Object(s.a)(I,2),R=F[0],T=F[1],M=Object(i.b)(),A=Object(i.c)((function(e){return e.wallet})),L=A.isExpenseEditing,N=A.editExpenseId,W=A.expenses;Object(a.useEffect)((function(){if(L){var e=W.findIndex((function(e){return e.id===N})),t=W[e];c(t.value),d(t.currency),x(t.method),w(t.tag),D(t.description),T(t.exchangeRates)}}),[N,L,W]);var z=function(){var e=Object(E.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a={id:null,value:n,currency:o,method:h,tag:O,description:S},L){e.next=9;break}return e.next=5,y();case 5:a.exchangeRates=e.sent,M(b(a)),e.next=11;break;case 9:a.exchangeRates=R,M(v(a));case 11:c(0),D(""),T(null);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=Object(i.c)((function(e){return e.wallet.currencies}));return r.a.createElement("form",{onSubmit:z},r.a.createElement("label",{htmlFor:"expensy-form--value"},"Valor: ",r.a.createElement("input",{"data-testid":"value-input",id:"expensy-form--value",type:"number",name:"value",value:n,onChange:function(e){var t=e.target;return c(t.value)}})),r.a.createElement("label",{htmlFor:"expensy-form--currency"},"Moeda: ",r.a.createElement("select",{id:"expensy-form--currency","data-testid":"currency-input",value:o,name:"currency",onChange:function(e){var t=e.target;return d(t.value)}},B.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),r.a.createElement("label",{htmlFor:"expensy-form--payment-method"},"M\xe9todo de pagamento: ",r.a.createElement("select",{id:"expensy-form--payment-method",value:h,name:"method",onChange:function(e){var t=e.target;return x(t.value)},"data-testid":"method-input"},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"expensy-form--category"},"Categoria: ",r.a.createElement("select",{id:"expensy-form--category",value:O,name:"category",onChange:function(e){var t=e.target;return w(t.value)},"data-testid":"tag-input"},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))),r.a.createElement("label",{htmlFor:"expensy-form--description"},"Descri\xe7\xe3o: ",r.a.createElement("input",{"data-testid":"description-input",id:"expensy-form--description",name:"description",value:S,onChange:function(e){var t=e.target;return D(t.value)}})),L?r.a.createElement("button",{type:"submit"},"Editar despesa"):r.a.createElement("button",{type:"submit"},"Adicionar despesa"))}function k(){var e=Object(i.c)((function(e){return e.wallet})).expenses,t=Object(i.b)();return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null," Descri\xe7\xe3o "),r.a.createElement("th",null," Tag "),r.a.createElement("th",null," M\xe9todo de pagamento "),r.a.createElement("th",null," Valor "),r.a.createElement("th",null," Moeda "),r.a.createElement("th",null," C\xe2mbio utilizado "),r.a.createElement("th",null," Valor convertido "),r.a.createElement("th",null," Moeda de convers\xe3o "),r.a.createElement("th",null," Editar/Excluir "))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.tag),r.a.createElement("td",null,e.method),r.a.createElement("td",null,Number(e.value).toFixed(2)),r.a.createElement("td",null,e.exchangeRates[e.currency].name.split("/")[0]),r.a.createElement("td",null,Number(e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",null,(Number(e.exchangeRates[e.currency].ask)*Number(e.value)).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"edit-btn",onClick:function(){return t({type:"isEditingExpense",id:e.id})}},"Editar"),r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(){return t({type:"removeExpense",id:e.id})}},"Excluir")))}))))}function C(){var e=Object(i.b)(),t=function(){var t=Object(E.a)(p.a.mark((function t(){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g("USDT");case 2:n=t.sent,a=Object.keys(n),e({type:"currencies",currencies:a});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){t()})),r.a.createElement("div",null,r.a.createElement(f,null),r.a.createElement(w,null),r.a.createElement(k,null))}var S=function(){return r.a.createElement("div",null,r.a.createElement("div",null,"Hello, TrybeWallet!"),r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/",exact:!0,component:d}),r.a.createElement(o.a,{path:"/carteira",exact:!0,component:C})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=n(11),I=n(29),F=n(30),R={email:""};var T=n(24),M={currencies:[],expenses:[],expensesId:0,isExpenseEditing:!1,editExpenseId:null};var A=Object(D.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"email":return Object(x.a)(Object(x.a)({},e),{},{email:t.email});default:return e}},wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"currencies":return Object(x.a)(Object(x.a)({},e),{},{currencies:t.currencies});case"expenses":var n=t.expense;return n.id=e.expensesId,Object(x.a)(Object(x.a)({},e),{},{expenses:[].concat(Object(T.a)(e.expenses),[n]),expensesId:e.expensesId+1});case"removeExpense":return Object(x.a)(Object(x.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.id}))});case"isEditingExpense":return Object(x.a)(Object(x.a)({},e),{},{isExpenseEditing:!0,editExpenseId:t.id});case"updateExpense":var a=e.editExpenseId,r=Object(T.a)(e.expenses),c=r.findIndex((function(e){return e.id===a}));return r[c]=t.expense,r[c].id=e.editExpenseId,Object(x.a)(Object(x.a)({},e),{},{expenses:r,isExpenseEditing:!1,editExpenseId:null});default:return e}}}),L=Object(D.createStore)(A,Object(I.composeWithDevTools)(Object(D.applyMiddleware)(F.a)));l.a.render(r.a.createElement(i.a,{store:L},r.a.createElement(u.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.949c93fe.chunk.js.map
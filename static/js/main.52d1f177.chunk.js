(this["webpackJsonptrybe-wallet"]=this["webpackJsonptrybe-wallet"]||[]).push([[0],{31:function(e,t,a){e.exports=a(53)},36:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),o=(a(36),a(3)),i=a(14),u=a(2),s=a(10);a(41);function m(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(o.b)();return r.a.createElement("div",{className:"container-centralized background-color-prymary"},r.a.createElement("div",{className:"Login"},r.a.createElement("div",{className:"Login__login text-color-tertiary font-size-xx"},"Login"),r.a.createElement("label",{htmlFor:"login--email"},r.a.createElement("input",{className:"text-alin-center","data-testid":"email-input",placeholder:"E-mail",type:"email",id:"login--email",name:"email",value:c,onChange:function(e){var t=e.target.value;return l(t)}})),r.a.createElement("label",{htmlFor:"login--password"},r.a.createElement("input",{className:"text-alin-center","data-testid":"password-input",placeholder:"Password",type:"password",id:"login--password",name:"password",value:m,onChange:function(e){var t=e.target.value;return d(t)}})),r.a.createElement("button",{className:"Login__button",type:"button",disabled:!(/\D{1,}@\D{1,}\.com/.test(c)&&m.length>=6),onClick:function(){var t=e.history.push;p(function(e){return{type:"email",email:e}}(c)),t("/carteira")}},"Entrar")))}a(42);function d(){return r.a.createElement("div",{className:"container-centralized background-color-prymary "},r.a.createElement("div",{className:"Not-logged "},r.a.createElement("p",{className:"font-size-xx"},"You are not logged"),r.a.createElement(i.b,{className:"font-size-xx Not-logged__link",to:"/"},"Click here"),r.a.createElement("span",{className:"font-size-xx"}," ","to login")))}var p=a(9),E=a.n(p),b=a(12),f=function(e){return{type:"expenses",expense:e}},v=function(e){return{type:"updateExpense",expense:e}};a(49);function x(){var e=Object(o.c)((function(e){return e})),t=e.user.email,a=e.wallet.expenses.reduce((function(e,t){var a=t.value,n=t.currency;return e+=a*t.exchangeRates[n].ask}),0).toFixed(2);return r.a.createElement("header",{className:"Header"},r.a.createElement("p",{"data-testid":"email-field"},t),r.a.createElement("div",null,r.a.createElement("span",null,"Despesa Total R$"," "),r.a.createElement("span",{"data-testid":"total-field"},a," "),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL")))}var h=a(19),g=a(4);function y(){return j.apply(this,arguments)}function j(){return(j=Object(b.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://economia.awesomeapi.com.br/json/all",e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return w.apply(this,arguments)}function w(){return(w=Object(b.a)(E.a.mark((function e(){var t,a,n,r,c=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"USDT",e.next=3,y();case 3:return a=e.sent,n=Object.keys(a),r=n.filter((function(e){return e!==t})).reduce((function(e,t){return Object(g.a)(Object(g.a)({},e),{},Object(h.a)({},t,a[t]))}),{}),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(50);function k(){var e=Object(n.useState)(0),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)("USD"),i=Object(s.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)("Dinheiro"),p=Object(s.a)(d,2),x=p[0],h=p[1],g=Object(n.useState)("Alimenta\xe7\xe3o"),j=Object(s.a)(g,2),O=j[0],w=j[1],k=Object(n.useState)(""),N=Object(s.a)(k,2),C=N[0],S=N[1],D=Object(n.useState)(null),I=Object(s.a)(D,2),F=I[0],R=I[1],T=Object(o.b)(),z=Object(o.c)((function(e){return e.wallet})),L=z.isExpenseEditing,M=z.editExpenseId,_=z.expenses;Object(n.useEffect)((function(){if(L){var e=_.findIndex((function(e){return e.id===M})),t=_[e];c(t.value),m(t.currency),h(t.method),w(t.tag),S(t.description),R(t.exchangeRates)}}),[M,L,_]);var A=function(){var e=Object(b.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n={id:null,value:a,currency:u,method:x,tag:O,description:C},L){e.next=9;break}return e.next=5,y();case 5:n.exchangeRates=e.sent,T(f(n)),e.next=11;break;case 9:n.exchangeRates=F,T(v(n));case 11:c(0),S(""),R(null);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=Object(o.c)((function(e){return e.wallet.currencies}));return r.a.createElement("form",{onSubmit:A,className:"background-color-tertiary ExpensyForm"},r.a.createElement("label",{htmlFor:"expensy-form--value"},"Valor: ",r.a.createElement("input",{className:"expensy-form--value","data-testid":"value-input",id:"expensy-form--value",type:"number",name:"value",value:a,onChange:function(e){var t=e.target;return c(t.value)}})),r.a.createElement("label",{htmlFor:"expensy-form--currency"},"Moeda: ",r.a.createElement("select",{id:"expensy-form--currency","data-testid":"currency-input",value:u,name:"currency",onChange:function(e){var t=e.target;return m(t.value)}},B.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),r.a.createElement("label",{htmlFor:"expensy-form--payment-method"},"M\xe9todo de pagamento: ",r.a.createElement("select",{id:"expensy-form--payment-method",value:x,name:"method",onChange:function(e){var t=e.target;return h(t.value)},"data-testid":"method-input"},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"expensy-form--category"},"Categoria: ",r.a.createElement("select",{id:"expensy-form--category",value:O,name:"category",onChange:function(e){var t=e.target;return w(t.value)},"data-testid":"tag-input"},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))),r.a.createElement("label",{htmlFor:"expensy-form--description"},"Descri\xe7\xe3o: ",r.a.createElement("input",{"data-testid":"description-input",id:"expensy-form--description",name:"description",value:C,onChange:function(e){var t=e.target;return S(t.value)}})),L?r.a.createElement("button",{type:"submit"},"Editar despesa"):r.a.createElement("button",{type:"submit"},"Adicionar despesa"))}a(51);function N(){var e=Object(o.c)((function(e){return e.wallet})).expenses,t=Object(o.b)();return r.a.createElement("table",{className:"ExpenseTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null," Descri\xe7\xe3o "),r.a.createElement("th",null," Tag "),r.a.createElement("th",null," M\xe9todo de pagamento "),r.a.createElement("th",null," Valor "),r.a.createElement("th",null," Moeda "),r.a.createElement("th",null," C\xe2mbio utilizado "),r.a.createElement("th",null," Valor convertido "),r.a.createElement("th",null," Moeda de convers\xe3o "),r.a.createElement("th",null," Editar/Excluir "))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.tag),r.a.createElement("td",null,e.method),r.a.createElement("td",null,Number(e.value).toFixed(2)),r.a.createElement("td",null,e.exchangeRates[e.currency].name.split("/")[0]),r.a.createElement("td",null,Number(e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",null,(Number(e.exchangeRates[e.currency].ask)*Number(e.value)).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"edit-btn",onClick:function(){return t({type:"isEditingExpense",id:e.id})}},"Editar"),r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(){return t({type:"removeExpense",id:e.id})}},"Excluir")))}))))}function C(){var e=Object(o.b)(),t=function(){var t=Object(b.a)(E.a.mark((function t(){var a,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("USDT");case 2:a=t.sent,n=Object.keys(a),e({type:"currencies",currencies:n});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){t()})),r.a.createElement("div",{className:"container-flex background-color-prymary"},r.a.createElement(x,null),r.a.createElement(k,null),r.a.createElement(N,null))}a(52);var S=function(e){var t=Object(o.c)((function(e){return e.user.login})),a=e.history.location.pathname;return console.log(a),r.a.createElement("div",{className:"App"},t||"/"===a?r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",exact:!0,component:m}),r.a.createElement(u.a,{path:"/carteira",exact:!0,component:C})):r.a.createElement(d,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(11),I=a(29),F=a(30),R={email:"",login:!1};var T=a(24),z={currencies:[],expenses:[],expensesId:0,isExpenseEditing:!1,editExpenseId:null};var L=Object(D.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"email":return Object(g.a)(Object(g.a)({},e),{},{email:t.email,login:!0});default:return e}},wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"currencies":return Object(g.a)(Object(g.a)({},e),{},{currencies:t.currencies});case"expenses":var a=t.expense;return a.id=e.expensesId,Object(g.a)(Object(g.a)({},e),{},{expenses:[].concat(Object(T.a)(e.expenses),[a]),expensesId:e.expensesId+1});case"removeExpense":return Object(g.a)(Object(g.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.id}))});case"isEditingExpense":return Object(g.a)(Object(g.a)({},e),{},{isExpenseEditing:!0,editExpenseId:t.id});case"updateExpense":var n=e.editExpenseId,r=Object(T.a)(e.expenses),c=r.findIndex((function(e){return e.id===n}));return r[c]=t.expense,r[c].id=e.editExpenseId,Object(g.a)(Object(g.a)({},e),{},{expenses:r,isExpenseEditing:!1,editExpenseId:null});default:return e}}}),M=Object(D.createStore)(L,Object(I.composeWithDevTools)(Object(D.applyMiddleware)(F.a)));l.a.render(r.a.createElement(o.a,{store:M},r.a.createElement(i.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{path:"/",component:S})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.52d1f177.chunk.js.map